<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BlockBuster - Store Locations</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.rtl.min.css"
        integrity="sha384-+4j30LffJ4tgIMrq9CwHvn0NjEvmuDCOfk6Rpg2xg7zgOxWWtLtozDEEVvBPgHqE" crossorigin="anonymous">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="icon" type="image/x-icon" href="img/Blockbuster_logo.svg.png">
    <link rel="stylesheet" href="css/sidenav.css">
    <link rel="stylesheet" href="css/map.css">

    <script type="module">
        // Initialize and add the map
        function initMap() {

            const tel_aviv = { lat: 32.08552355994881, lng: 34.78216797643222 };

            // The map, centered at tel aviv
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 7,
                center: tel_aviv
            });

            var _locations = [<%= stores %>];

            _locations.forEach(location => {
                {
                    new google.maps.Marker(
                        {
                            position: { lat: parseFloat(location["Lat"]), lng: parseFloat(location["Len"]) },
                            map: map
                        });
                }
            })
        }

        window.initMap = initMap;
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
</head>

<body>
    <header id="sidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="/main">Home page</a>
        <a href="/movies">Movies</a>
        <a href="/tvshows">TV Shows</a>
        <a href="/locations">Locations</a>
        <a href="/logout">Logout</a>
    </header>
    <div id="main">
        <div class="container-fluid">
            <div class="row">
                <nav class="navbar bg-dark">
                    <div class="container-fluid">
                        <span id="sidenavBtn" onclick="openNav()">&#9776;</span>
                        <form class="d-flex mx-auto" role="search">
                            <div class="input-group mb-3 title text-center">
                                <h5 class="text-white" id="headline">Our Stores Locations</h5>
                            </div>
                        </form>
                    </div>
                </nav>
                <div id="map"></div>
            </div>
        </div>
        <footer>
            <nav class="navbar">
                <div class="container-fluid">
                    <span>
                        <a class="navbar-brand" href="/main">Home Page</a>
                        <a class="navbar-brand" href="/locations">Locations</a>
                    </span>
                </div>
            </nav>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAvUlKCwgCEFzOgh04sDUdaA9ILtE_SJ9Y&callback=initMap&v=weekly"
        defer></script>

    <script src="js/sidenav.js"></script>
</body>

</html>